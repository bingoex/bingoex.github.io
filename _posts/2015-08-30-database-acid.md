---
layout: post
title: 数据库事务的ACID
categories: 数据库
description: 数据库事务的ACID
keywords: ACID, 数据库ACID
---

# ACID

ACID是指在可靠数据库管理系统（DBMS）中，事务所具有的四个特性：原子性、一致性、隔离性、持久性。是由数据库管理系统来实现的。
- 通常采用日志来保证事务的原子性、一致性和持久性。
- 日志记录了事务对数据库所做的更新，如果某个事务在执行过程中发生错误，就可以根据日志，撤销事务对数据库已做的更新，使数据库退回到执行事务前的初始状态。
- 采用锁机制来实现事务的隔离性。当多个事务同时更新数据库中相同的数据时，只允许持有锁的事务能更新该数据，其他事务必须等待，直到前一个事务释放了锁，其他事务才有机会更新该数据。
 
 
# 原子性（Atomicity）

事务必须是原子工作单元：对于其修改，**要么全都执行，要么全都不执行**。（通常思想是使用copy落地老数据，然后执行修改，如果需要回滚则利用原先落地的老数据进行回滚）  
 

# 一致性（Consistency）

事务在完成时，**必须使所有的数据都保持一致状态**。事务结束时，所有的内部数据结构（如 B 树索引或双向链表）都必须是正确的。某些维护一致性的责任由业务开发人员负责，他们必须确保应用程序已强制所有已知的完整性约束。例如，当在转帐时，应保证A、B用户金钱之和的正确性。  
 

# 隔离性（Isolation）详情请看

并发事务所作的修改必须与任何其它并发事务所作的修改隔离。**事务查看数据时数据所处的状态，要么是另一并发事务修改它之前的状态，要么是另一事务修改它之后的状态**，事务不会查看中间状态的数据。

当事务可序列化时将获得最高的隔离级别。

由于高度隔离会限制可并行执行的事务数，所以一些应用程序降低隔离级别以换取更大的吞吐量。
 

# 持久性（Durability）

事务完成之后，它对于系统的影响是永久性的。即使出现致命的故障也将一直保持。


# 分布式事务

详情请看


